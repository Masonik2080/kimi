# Kimi

Менеджер рабочих столов для Windows. Позволяет создавать несколько рабочих столов и переключаться между ними.

## Зачем

Dexpot постоянно лагал и путал иконки. Решил написать своё.

## Как работает

Kimi комбинирует два подхода:

1. Виртуальные рабочие столы Windows (Win+Tab) через winvd — переключение столов, перемещение окон
2. Отдельные папки для файлов — каждый стол имеет свою папку с иконками

При переключении стола:
- Меняется виртуальный рабочий стол Windows
- Системный путь Desktop переключается на `C:\Kimi\Desktop1`, `Desktop2` и т.д.
- Позиции иконок сохраняются и восстанавливаются для каждого стола

## Где хранятся файлы

```
C:\Kimi\
├── kimi.json          # конфиг (активный стол, маппинги)
├── Desktop1\          # файлы первого стола
│   └── icons.json     # позиции иконок
├── Desktop2\          # файлы второго стола
│   └── icons.json
└── ...
```

Оригинальный путь Desktop (`C:\Users\Имя\Desktop`) сохраняется в конфиге при первом запуске.

## Что происходит при удалении Kimi

1. Путь Desktop автоматически восстанавливается на оригинальный (`C:\Users\Имя\Desktop`)
2. Папка `C:\Kimi\` с файлами НЕ удаляется — ваши файлы остаются на месте
3. На рабочем столе появляется файл `Kimi - ваши файлы.txt` с инструкцией

Файлы никуда не пропадают. Можно скопировать нужное из `C:\Kimi\Desktop1\` и удалить папку вручную.

## Стек

- Frontend: React 19, TypeScript, Tailwind CSS
- Backend: Tauri 2.0, Rust
- Windows API: windows-rs crate

## Требования

- Windows 10/11
- Права администратора (для изменения системного пути Desktop)

## Языки

Русский и английский. Язык выбирается автоматически по системе или вручную в настройках.

## Основные методы

Windows API:
- `SHSetKnownFolderPath` — меняет путь папки Desktop
- `SHChangeNotify` — уведомляет Explorer об изменениях
- `SendMessageW` / `PostMessageW` — обновление иконок

winvd crate:
- `go_to_desktop` — переключение на рабочий стол
- `move_window_to_desktop` — перемещение окна
- `get_desktop_count` — количество столов

## Ветки

- `main` — стабильная версия
- `dev` — текущая разработка

## Сборка

```bash
cd kimi
npm install
npm run tauri dev      # разработка
npm run tauri build    # продакшн
```

## Лицензия

MIT
